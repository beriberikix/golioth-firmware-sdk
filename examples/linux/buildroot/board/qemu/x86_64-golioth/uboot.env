# U-Boot environment for Golioth QEMU x86_64
# Automatically load and boot Linux kernel from virtio drives

# Initialize virtio devices
init_virtio=virtio scan

# Kernel loading from virtio drive 1 (raw bzImage file)
load_kernel=load virtio 1 ${kernel_addr_r} bzImage

# Set kernel command line arguments
set_bootargs=setenv bootargs rootwait root=/dev/vda console=ttyS0

# Complete boot sequence
autoboot=run init_virtio; run load_kernel; run set_bootargs; bootz ${kernel_addr_r}

# Set default boot delay
bootdelay=2

# Automatically run autoboot command
bootcmd=run autoboot