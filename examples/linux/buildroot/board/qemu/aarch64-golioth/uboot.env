# U-Boot environment for Golioth QEMU ARM64
# Automatically load and boot Linux kernel from virtio drives

# Initialize virtio devices
init_virtio=virtio scan

# Kernel loading from virtio drive 1 (raw Image file)
load_kernel=load virtio 1 ${kernel_addr_r} Image

# Set kernel command line arguments
set_bootargs=setenv bootargs rootwait root=/dev/vda console=ttyAMA0

# Complete boot sequence
autoboot=run init_virtio; run load_kernel; run set_bootargs; booti ${kernel_addr_r} - ${fdtcontroladdr}

# Set default boot delay
bootdelay=2

# Automatically run autoboot command
bootcmd=run autoboot